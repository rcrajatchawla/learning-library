{"paragraphs":[{"text":"%md\n\n# Using the OML AutoML UI model for scoring\n\nIn this simple scoring exercise we will use the model that was created in the OML AutoML UI to score the customers in the existing `MOVIESTREAM_CHURN` table, in order to prepare a list of potential customers to contact for offers.\n\nWe need to make sure that in the OML AutoML UI we renamed the model to use this new name in the *PREDICTION* and *PREDICTION_PROBABILITY* SQL functions.  In the code below we are assuming the name `CHURN_PREDICTION_AUTOML_RF`, so adjust as necessary.\n\nCopyright (c) 2021 Oracle Corporation \n###### <a href=\"https://oss.oracle.com/licenses/upl/\" onclick=\"return ! window.open('https://oss.oracle.com/licenses/upl/');\">The Universal Permissive License (UPL), Version 1.0</a>\n---","user":"MOVIEWORK","dateUpdated":"2021-08-23T19:12:31+0000","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"editorSetting":{"language":"md","editOnDblClick":false},"editorHide":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>Using the OML AutoML UI model for scoring</h1>\n<p>In this simple scoring exercise we will use the model that was created in the OML AutoML UI to score the customers in the existing <code>MOVIESTREAM_CHURN</code> table, in order to prepare a list of potential customers to contact for offers.</p>\n<p>We need to make sure that in the OML AutoML UI we renamed the model to use this new name in the <em>PREDICTION</em> and <em>PREDICTION_PROBABILITY</em> SQL functions.  In the code below we are assuming the name <code>CHURN_PREDICTION_AUTOML_RF</code>, so adjust as necessary.</p>\n<p>Copyright (c) 2021 Oracle Corporation</p>\n<h6><a href=\"https: //oss.oracle.com/licenses/upl/\" onclick=\"return ! window.open('https://oss.oracle.com/licenses/upl/');\">The Universal Permissive License (UPL), Version 1.0</a></h6>\n<hr />\n"}]},"interrupted":false,"jobName":"paragraph_1628800333387_-1680884929","id":"20210812-203213_364991689","dateCreated":"2021-08-11T07:03:45+0000","dateStarted":"2021-08-23T19:12:32+0000","dateFinished":"2021-08-23T19:12:32+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"focus":true,"$$hashKey":"object:40"},{"title":"Remove the table if it exists","text":"%script\n\nBEGIN EXECUTE IMMEDIATE 'DROP TABLE POTENTIAL_CHURNERS';\n      EXCEPTION WHEN OTHERS THEN NULL; \nEND;","user":"MOVIEWORK","dateUpdated":"2021-08-23T19:12:32+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\nPL/SQL procedure successfully completed.\n\n"}]},"interrupted":false,"jobName":"paragraph_1628800333387_1550330039","id":"20210812-203213_1232502900","dateCreated":"2021-08-12T07:03:54+0000","dateStarted":"2021-08-23T19:12:33+0000","dateFinished":"2021-08-23T19:12:51+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:41"},{"title":"Create a new table POTENTIAL_CHURNERS","text":"%sql\n\nCREATE TABLE POTENTIAL_CHURNERS AS   \nSELECT * FROM \n      (SELECT CUST_ID, \n              PREDICTION(CHURN_PREDICTION_AUTOML_RF USING M.*) WILL_CHURN,\n              ROUND(PREDICTION_PROBABILITY(CHURN_PREDICTION_AUTOML_RF, '1'  USING M.*),6) PROB_CHURN\n              FROM MOVIESTREAM_CHURN M)\n       ORDER BY PROB_CHURN DESC;\n\n","user":"MOVIEWORK","dateUpdated":"2021-08-23T19:12:51+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"CUST_ID":"string","WILL_CHURN":"string","PROB_CHURN":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"interrupted":false,"jobName":"paragraph_1628800333387_-265988764","id":"20210812-203213_1901830845","dateCreated":"2021-08-11T07:05:21+0000","dateStarted":"2021-08-23T19:12:51+0000","dateFinished":"2021-08-23T19:12:54+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:42"},{"title":"Review a sample output","text":"%sql\n\nSELECT * FROM POTENTIAL_CHURNERS SAMPLE(0.2)\n         ORDER BY PROB_CHURN DESC;\n","user":"MOVIEWORK","dateUpdated":"2021-08-23T19:12:54+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"CUST_ID":"string","WILL_CHURN":"string","PROB_CHURN":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"CUST_ID\tWILL_CHURN\tPROB_CHURN\n1137196\t1\t0.96888\n1143442\t1\t0.96703\n1356400\t1\t0.961194\n1159295\t1\t0.954951\n1293287\t1\t0.934069\n1039018\t1\t0.923226\n1001117\t1\t0.919319\n1196248\t1\t0.900739\n1096229\t1\t0.898291\n1307725\t1\t0.889363\n1335865\t1\t0.866106\n1161127\t1\t0.859132\n1308175\t1\t0.856685\n1104536\t1\t0.852099\n1096403\t1\t0.838608\n1046427\t1\t0.805064\n1383671\t1\t0.797942\n1161298\t1\t0.796419\n1142421\t1\t0.787628\n1327898\t1\t0.753185\n1028353\t1\t0.725325\n1196256\t1\t0.724419\n1363477\t1\t0.687377\n1309023\t1\t0.679038\n1023879\t1\t0.657707\n1156764\t1\t0.610647\n1341308\t1\t0.605069\n1162615\t1\t0.573741\n1399623\t1\t0.542338\n1074164\t1\t0.504978\n1079496\t0\t0.482551\n1017105\t0\t0.461666\n1289292\t0\t0.45084\n1044682\t0\t0.445773\n1308894\t0\t0.433619\n1238045\t0\t0.431413\n1056237\t0\t0.419258\n1186316\t0\t0.413247\n1255337\t0\t0.394453\n1170083\t0\t0.382802\n1153994\t0\t0.370624\n1197552\t0\t0.36069\n1069797\t0\t0.334153\n1129540\t0\t0.321871\n1172092\t0\t0.280883\n1046861\t0\t0.27946\n1008289\t0\t0.272258\n1118894\t0\t0.237722\n1068664\t0\t0.235774\n1034312\t0\t0.228333\n1037826\t0\t0.218579\n1397712\t0\t0.217857\n1067891\t0\t0.172857\n1071396\t0\t0.167121\n1330952\t0\t0.161145\n1022391\t0\t0.155766\n1028751\t0\t0.155\n1035871\t0\t0.150226\n1034028\t0\t0.1425\n1223165\t0\t0.139942\n1144621\t0\t0.138088\n1192680\t0\t0.131008\n1093616\t0\t0.125758\n1275619\t0\t0.123768\n1082038\t0\t0.122311\n1008844\t0\t0.120895\n1341072\t0\t0.119942\n1238556\t0\t0.111566\n1217467\t0\t0.11\n1234255\t0\t0.109527\n1134938\t0\t0.10744\n1290515\t0\t0.106234\n1062165\t0\t0.104527\n1096360\t0\t0.103882\n1371652\t0\t0.102595\n1083179\t0\t0.100132\n1420744\t0\t0.093934\n1264181\t0\t0.093934\n1001174\t0\t0.089924\n1249805\t0\t0.089432\n1242620\t0\t0.087424\n1365314\t0\t0.086599\n1036789\t0\t0.083788\n1442556\t0\t0.082393\n1084582\t0\t0.081194\n1152990\t0\t0.081194\n1365804\t0\t0.080965\n1266405\t0\t0.080822\n1160321\t0\t0.080656\n1308765\t0\t0.078886\n1259805\t0\t0.076194\n1265760\t0\t0.075965\n1320369\t0\t0.071194\n1286960\t0\t0.071194\n1067877\t0\t0.07\n1285017\t0\t0.066667\n1363896\t0\t0.066194\n1418718\t0\t0.065965\n1075285\t0\t0.065758\n1103800\t0\t0.065758\n1266089\t0\t0.065455\n1155506\t0\t0.065303\n1055079\t0\t0.065\n1191506\t0\t0.064237\n1161551\t0\t0.063977\n1189637\t0\t0.062857\n1337214\t0\t0.062692\n1065333\t0\t0.062579\n1402652\t0\t0.061667\n1143497\t0\t0.061194\n1037044\t0\t0.061194\n1101679\t0\t0.060766\n1015485\t0\t0.060303\n1153935\t0\t0.058788\n1169992\t0\t0.057952\n1219664\t0\t0.057727\n1077101\t0\t0.056875\n1373603\t0\t0.055877\n1355693\t0\t0.055824\n1372080\t0\t0.055601\n1338333\t0\t0.054417\n1094542\t0\t0.052857\n1289995\t0\t0.052102\n1412384\t0\t0.050965\n1164750\t0\t0.050965\n1094435\t0\t0.050833\n1302613\t0\t0.050601\n1010144\t0\t0.050138\n1157843\t0\t0.05\n1148920\t0\t0.049886\n1197032\t0\t0.049886\n1151875\t0\t0.049359\n1351879\t0\t0.049091\n1307205\t0\t0.047102\n1267239\t0\t0.047102\n1076797\t0\t0.047102\n1063085\t0\t0.047102\n1169968\t0\t0.045601\n1034206\t0\t0.045601\n1373922\t0\t0.045455\n1168484\t0\t0.045455\n1392967\t0\t0.045455\n1381643\t0\t0.045303\n1181460\t0\t0.044375\n1172186\t0\t0.044375\n1158871\t0\t0.041518\n1019623\t0\t0.040758\n1163082\t0\t0.040601\n1446799\t0\t0.040601\n1079151\t0\t0.040584\n1313722\t0\t0.039692\n1119707\t0\t0.038333\n1007575\t0\t0.038333\n1269248\t0\t0.037238\n1290540\t0\t0.03619\n1013854\t0\t0.03619\n1149546\t0\t0.035601\n1263506\t0\t0.035601\n1439825\t0\t0.035601\n1000948\t0\t0.035601\n1311540\t0\t0.035601\n1436508\t0\t0.035601\n1090085\t0\t0.035\n1291111\t0\t0.033636\n1010914\t0\t0.032857\n1417380\t0\t0.031818\n1187404\t0\t0.031818\n1029912\t0\t0.03119\n1145287\t0\t0.030824\n1010967\t0\t0.030601\n1150875\t0\t0.030601\n1323155\t0\t0.029359\n1292430\t0\t0.028636\n1372349\t0\t0.028377\n1407458\t0\t0.028333\n1146475\t0\t0.027727\n1166415\t0\t0.026502\n1312390\t0\t0.026502\n1396809\t0\t0.026458\n1163568\t0\t0.025965\n1092673\t0\t0.025601\n1251313\t0\t0.025601\n1311734\t0\t0.025601\n1123486\t0\t0.025601\n1106980\t0\t0.025\n1067470\t0\t0.025\n1081038\t0\t0.023636\n1175332\t0\t0.022857\n1229185\t0\t0.021502\n1071156\t0\t0.021502\n1372342\t0\t0.020982\n1441243\t0\t0.018125\n1440518\t0\t0.017857\n1215035\t0\t0.016667\n1307864\t0\t0.016667\n1009706\t0\t0.015\n1102488\t0\t0.015\n1090752\t0\t0.015\n1440974\t0\t0.015\n1118218\t0\t0.015\n1269055\t0\t0.015\n1048318\t0\t0.014545\n1009030\t0\t0.014091\n1181297\t0\t0.014091\n1247773\t0\t0.013636\n1311389\t0\t0.013125\n1155527\t0\t0.012424\n1419310\t0\t0.011538\n1022228\t0\t0.01\n1306921\t0\t0.01\n1194170\t0\t0.01\n1202009\t0\t0.01\n1001789\t0\t0.01\n1408424\t0\t0.01\n1160754\t0\t0.01\n1104082\t0\t0.01\n1386333\t0\t0.01\n1366183\t0\t0.009091\n1248440\t0\t0.008333\n1088818\t0\t0.008125\n1041439\t0\t0.008125\n1010617\t0\t0.007143\n1295278\t0\t0.005\n1142320\t0\t0.005\n1071781\t0\t0.005\n1130330\t0\t0.005\n1029065\t0\t0.005\n1141474\t0\t0.003333\n1159715\t0\t0\n1186129\t0\t0\n1071905\t0\t0\n1115462\t0\t0\n1191303\t0\t0\n1215079\t0\t0\n1202514\t0\t0\n1411299\t0\t0\n1290076\t0\t0\n1374545\t0\t0\n1061960\t0\t0\n1137351\t0\t0\n1077121\t0\t0\n1031290\t0\t0\n1130170\t0\t0\n1195550\t0\t0\n1233966\t0\t0\n1020769\t0\t0\n1442181\t0\t0\n1161436\t0\t0\n1096828\t0\t0\n1445560\t0\t0\n1354611\t0\t0\n1189750\t0\t0\n1317098\t0\t0\n1200720\t0\t0\n1141982\t0\t0\n1294338\t0\t0\n1165729\t0\t0\n1210582\t0\t0\n1197404\t0\t0\n1362215\t0\t0\n1099742\t0\t0\n1129376\t0\t0\n1268135\t0\t0\n1184128\t0\t0\n1135667\t0\t0\n1319438\t0\t0\n1314285\t0\t0\n"}]},"interrupted":false,"jobName":"paragraph_1628800333387_-1327433814","id":"20210812-203213_1443242557","dateCreated":"2021-08-12T07:06:16+0000","dateStarted":"2021-08-23T19:12:55+0000","dateFinished":"2021-08-23T19:12:55+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:43"},{"text":"%sql\n","user":"MOVIEWORK","dateUpdated":"2021-08-12T20:46:22+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql"},"settings":{"params":{},"forms":{}},"interrupted":false,"jobName":"paragraph_1628800333387_4989978","id":"20210812-203213_1233015592","dateCreated":"2021-08-11T07:11:42+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":false,"$$hashKey":"object:44"}],"name":"Scoring customers with Churn Model","id":"1395787","noteParams":{},"noteForms":{},"angularObjects":{"ORA3E02A28C53:shared_process":[],"ORA99E1F35ED3:shared_process":[],"ORA466057A055:shared_process":[],"MDWC6F71EE9E1:shared_process":[]},"config":{"looknfeel":"default","personalizedMode":"false"},"info":{}}